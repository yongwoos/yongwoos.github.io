---
title: 기본 명령어
weight: -3
---
## 명령어
### 종료
```bash
poweroff
shutdown -P now #지금 종료
shutdown -P +10 #10분후 종료
shutdown -r 22:00 #22시 재부팅
shutdown -c #예약된 종료 취소
shutdown -k +15 #현재 접속한 사용자에게 15분후 종료한다는 메시지 전송, 실제로는 종료되지 않음
halt -p
init 0
```

### 재부팅
```bash
shutdown -r
reboot
init 6
```

### 로그아웃
* 관리자가 시스템 종료를 하면 접속된 모든 유저의 연결 해제
* 관리자가 접속을 해제하고자 하는 경우 logout이나 exit명령을 이용해서 로그아웃

### init
* run레벨을 의미
```shell
init 0 # 종료
init 1 # 복구 모드로 한 명의 사용자만 접속 가능
init 6 # 재부팅
```
### 명령어 사용법
* SHELL: 명령어 해석기. 터미널이나 원격접속툴에서 명령을 내리면 SHELL이 번역을 해서 kernel에 전달하고 실제 명령이 수행됨
* 기능: 
  * 명령어해석기
  * 프로그래밍
  * 사용자환경설정: shell은 사용자 환경을 설정할 수 있도록 초기화 파일 제공<br>
  전체 설정 파일을 읽은 후 사용자 환경 설정 파일을 읽어서 사용자 별로 환경을 구성
* shell에 보여지는 문자열-프롬프트
  ```shell
  사용자이름@호스트이름(컴퓨터):~$
  슈퍼사용자일 경우 사용자이름@호스트이름(컴퓨터):~#
  ```
  * 로그인 할 때 하나의 shell이 보여지게 됨. 이 shell을 로그인 shell이라함
  * 현재 사용중인 shell 확인하는 명령
  ```shell
  echo $SHELL
  ```
  * ~: 홈디렉토리
* 명령어 입력 시 에러가 발생한 경우
  * 키보드 입력이 안될 시 CTRL + s를 눌러 잠금을 한 경우: CTRL + q를 눌러 잠금해제
  * 명령이 종료되지 않은 경우: CTRL + c 눌러 현재 실행중 프로세스 강제 종료
  * 실수로 텍스트파일이 아닌 파일을 열어 한글이 깨지는 경우: CTRL + l(clear)을 눌러 화면 클리어

* 명령어의 구조는 기본적으로 명령 [옵션] [인자]
* 명령은 실행 프로그램 또는 내장 명령어
* 옵션은 -또는--
  * -다음에는 한글자
  * --다음에는 단어
* 옵션은 대부분의 경우 순서에 상관없이 여러개 입력 가능
* 한글자인 경우 결합가능

```shell
ls -a 또는 ls --all
ls -a -l -> ls -al # 결합 가능
docker -dit -> docker -d -i -t # d=background, i=interactive, t=terminal
```

### 명령어 자동완성
* 입력 중 입력 한 단어로 시작하는 명령이 하나만 존재한다면 tab을 누르면 명령어는 자동완성이 됨. <br>
입력 중 입력한 단어로 시작하는 명령이 여러 개 존재한다면 tab을 한 번 더 누르면 모든 명령 출력

### 명령어 입력방식
* 텍스트파일에 만들어두고 이 파일의 내용을 읽어서 수행: 스크립트 방식이라고 하고 파일의 확장자는 sh

### 히스토리 기능
* 이전에 수행했던 명령어를 저장
* 키보드화살표 사용 또는 CTRL + p, CTRL + n명령 이용
* CTRL + r을 이용하면 증분 모드로 검색 가능
* history라고 입력 시 수행한 모든 명령어 출력
```shell
history
```
* more로 파일내용
```shell
more 파일명
```
### 옵션
* !!: 직전 명령어 수행
* !번호: 번호에 해당하는 명령어 수행
* !문자열: 문자열로 시작하는 마지막 명령어를 수행
* history -d 라인번호: 라인번호에 해당하는 명령어 삭제
* history -c: 모든 명령어를 삭제

* history내용은 홈 디렉토리의 .bash_history파일에 저장되어 있음
* .파일명 -> 숨김파일

### 명령어 도움말
* 명령어 --help
* man이라는 명령어도 도움말을 출력
```shell
man [옵션] [섹션] 명령
```
* shell이 명령어 찾는 위치 - 환경변수 path
* 현재 디렉토리에서 명령을 찾고 없으면 PATH에서 찾고 그래도 없으면 shell내장 명령 수행
```shell
echo $PATH
```
* 명령어의 절대 경로 찾기: whereis [옵션][명령어 - 실행(바이너리) 파일]
* 스케줄링 같은 것을 할 때는 명령어의 절대 경로를 기반으로 수행
* 내장 명령의 경우는 별 문제가 안되지만 내장 명령이 아닌 경우는 절대경로를 알아야함
* 옵션
  * -b: 바이너리 파일만 검색
  * -m: 메뉴얼 파일만 검색
  * -s: 소스 파일만 검색
  ```shell 
  whereis -m ls
  ```
  * which는 명령어를 찾을 때 PATH에서만 찾음
  * a나 i옵션을 이용하는 경우가 있음
* 기타 명령어
  * passwd: 비밀번호 변경
  * exit: 현재사용중인 SHELL종료, 로그인SHELL에서 다른SHELL 실행한 경우는 이전에 실행한 SHELL로 이동
  * clear: 현재 화면 삭제 - CTRL + l

### SSH
```shell
sudo apt-get update
sudo apt-get install openssh-server
sudo systemctl status ssh
sudo ufw allow ssh
```

* 패키지관리자 - central repository의 프로그램/패키지 저장 위한 db <br>
->접속하면 로컬에 DB 가져옴 <br>
->프로그램 업데이트 시 로컬도 업데이트 시켜야->apt-get update <br>
* sudo->관리자 권한
* firewall: inbound제어 못들어오게

* proxy서버: outbound제어
* 유저에 관리자 권한이 없으면 위의 명령이 수행안될 수 있음
```shell
sudo usermod -aG sudo 계정명  # 계정 관리자 권한 설정
```

### 포트포워딩
* 내부의 IP와 외부IP를 매핑해서 내부에서 사설 IP를 사용하지만 외부 IP를 이용해서 인터넷을 할 수 있도록 해주고 외부에서는 설정한 외부IP를 이용해 내부IP를 가진 컴퓨터에 접근할 수 있도록 해줌
* 리눅스에서 사설 IP 조회, 터미널 실행시켜 hostname -i 명령 수행 (ifconfig 명령은 net-tools 설치해야) (Default 주소는 10.0.2.15)
* 터미널이 실행이 안될 때는 [설정] - [Region & Language] 에서 캐나다로 변경하고 로그아웃 후 다시 로그인
* 윈도우즈에서 공인 IP 조회: ipconfig /all<br>
실제 사용하는 어댑터의 IP주소 확인 (인터넷 어댑터 이더넷 2)
* virtual box의 [머신] - [설정] - [고급] - [포트포워딩] 선택 후 룰 추가<br>
포트번호: 22, 호스트IP: 윈도우즈IP, 게스트IP: 리눅스사설IP, 포트번호: 22
* ssh 계정@호스트IP -p 포트번호 으로 접속
* 리눅스 계정 전환
```shell
sudo # 일시적으로 관리자 권한 부여 superuser do
sudo su
su root
su -root # 관리자로 전환
su [계정명] # 특정계정으로 전환
```

### alias
* 별칭 부여
```shell
alias 별명 = '설정값'
unalias # 별명 해제
```
* 어떤 명령이 별명인지 확인하고자 할 때는 type 명령을 입력했을 때 명령이라면 명령 위치 출력, 별명이라면 원본 위치 출력
* ex
```shell
alias ls='ls -F' # alias 설정
unalias ls # 해제
```
* type ls: 별명이라서 명령의 위치가 나오지 않고 별명이라고 출력
* type cp: 별명이 아니라서실제 위치가 출력
  
### 별명이 설정되어 있을 때 원본 명령어를 실행
* 전체 경로로 명령어를 입력(명령어 위치를 whereis나 which 사용)
* command 명령어나 \명령어를 입력

### 날짜 및 시간 명령
* date: 시스템에서 설정되어 있는 현재 시각과 날짜를 출력
* timedatectl: 하드웨어 및 소프트웨어에 설정된 모든 시간과 날짜를 출력

### 시스템 사용자 정보
* logname: 로그인네임
* users: 접속한 사용자 이름
* who: 로그인 한 모든 사용자 계정
* whoami: 현재 사용자

### 시스템 정보 확인
* uname [옵션] <br>
-a: 시스템의 모든 정보 확인<br>
-m: 시스템이 사용 중인 하드웨어 정보 확인<br>
-n: 호스트 네임 확인 - 컴퓨터 이름<br>
-r: 운영체제 릴리즈 번호<br>
-s: 운영체제 이름 <br>
-v: 버전 출시 일자 <br>
* hostname: 현재 사용중인 컴퓨터 이름, 옵션 이용해 IP 확인가능
* arch: CPU 정보
* env: 환경변수 확인

### sudo와 su
* sudo: 일시적으로 관리자 권한으로 실행<br>
패키지 관련 명령이나 환경설정파일 수정할 때 관리자 권한 요청
* su 계정: 현재 계정의 환경변수 유지하면서 다른 계정으로 전환
* su - 계정: 다른 사용자의 계정으로 전환할 때 *환경변수*도 전환
* su: *관리자 계정*으로 전환

### 편집기
* 행단위편집기: ed, ex, sed
* 화면단위편집기: vi(vim), emacs, nano(메뉴기반)
* GUI편집기: gedit
* 모드형 편집기: 입력모드와 명령모드 구분<br>
vi가 대표적인 모드형 편집기
* 비모드형 편집기: 입력모드와 명령모드가 구분되어있지 않음<br>
명령은 CTRL이나 ALT 등과 다른 키를 조합해서 수행<br>
nano가 대표적인 비모드형 편집기