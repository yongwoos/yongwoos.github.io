---
title: 고려사항
weight: 7
---
```
WAS -> 카프카 -> 가격감지 -> 알림서버
```
### 1. 컨슈머 에러 문제?
=> 데드레터 토픽 사용

### 2. 카프카 지연 (초기지연) 문제? 
=> 배치, ack, linger, 압축 옵션 이용

---
### 3.1 가격감지 다운되었을 때 초기화 시 어떻게 구분할 것인가?
이전에 사용자가 지정한 코인 목록을 가져올 때 파드 2개가 구분되야 함 -> Deployment의 파드마다 코드가 달라야 함 -> 쿠버네티스 철학 배치

### 3.2 가격감지 스케일 아웃 문제?
스케일 아웃 시 -> 파드수에 맞게 카프카 파티션이 추가되야 함-> 유연한 스케일아웃이 아님, 스케일 다운 시 파티션 낭비됨

=> 레플리카는 1개만

---
### 4. 모니터링 토픽 문제
알림 종류마다 토픽을 사용할 경우 순서 보장 안됨 -> 삭제 후 추가되는 문제 발생 가능

=> 하나의 토픽에 키로 구분 -> 추후에 파티션 확장 하더라도 순서 지켜지게